@import './app/styles/responsive-enhancements.css'; /* responsive enhancements */
@import './app/styles/quick-access-performance.css'; /* Quick Access Rail performance */
@import './app/styles/performance-optimized.css';
@import './app/styles/account-card.css';
@import './app/styles/calculator-overrides.css';
@import './app/styles/nav-styles.css'; /* iOS 26 Liquid Glass Navigation */
@import './app/styles/viewport-guardian.css'; /* Viewport Guardian utilities */
@import './app/styles/card-interactions.css';
@import './app/styles/card-variants.css';
@import './app/styles/accessibility.css';
@import './app/styles/pfm-row.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. */

@layer base {
  :root {
    --radius: 0.5rem;
  }

  [data-theme='dark'], .dark {
    /* UPDATED: Dark mode with Vueni brand colors */
    --background: 219 68% 9%;           /* Cosmic Odyssey background */
    --foreground: 210 40% 98%;

    --card: 219 55% 15%;                /* Lighter variant for cards */
    --card-foreground: 210 40% 98%;

    --popover: 219 55% 15%;
    --popover-foreground: 210 40% 98%;

    --primary: 224 44% 56%;             /* Sapphire Dust primary */
    --primary-foreground: 210 40% 98%;

    --secondary: 35 54% 64%;            /* Caramel Essence secondary */
    --secondary-foreground: 219 68% 9%;

    --muted: 35 20% 50%;                /* Muted variant of neutral */
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 35 54% 64%;               /* Caramel Essence accent */
    --accent-foreground: 219 68% 9%;

    --destructive: 0 62.8% 45%;         /* Accessible red */
    --destructive-foreground: 210 40% 98%;

    --border: 219 45% 25%;              /* Border using surface system */
    --input: 219 45% 25%;
    --ring: 224 44% 56%;                /* Sapphire Dust for focus ring */
    
    /* Sidebar colors updated to Vueni brand */
    --sidebar-background: 219 68% 9%;   /* Cosmic Odyssey */
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224 44% 56%;     /* Sapphire Dust */
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 219 55% 15%;      /* Card color */
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 219 45% 25%;      /* Border color */
    --vueni-eco: #4AFF88;
    --vueni-eco-rgb: 74 255 136;
    --vueni-wellness: #4A9EFF;
    --vueni-wellness-rgb: 74 158 255;
    --vueni-financial: #9F4AFF;
    --vueni-financial-rgb: 159 74 255;
    --vueni-cosmic-odyssey: #9F4AFF;
    --vueni-blue-oblivion: #4A9EFF;
    --sidebar-ring: 224 44% 56%;        /* Sapphire Dust */

    /* NEW: Vueni Glass Effects CSS Custom Properties */
    --vueni-glass-subtle: rgba(81, 106, 200, 0.03);
    --vueni-glass-default: rgba(81, 106, 200, 0.06);
    --vueni-glass-prominent: rgba(81, 106, 200, 0.12);
    --vueni-glass-border: rgba(81, 106, 200, 0.08);

    /* NEW: Vueni Brand Color CSS Variables */
    --vueni-primary: #516AC8;
    --vueni-primary-dark: #0F1939;
    --vueni-secondary: #E3AF64;
    --vueni-secondary-dark: #26428B;
    --vueni-success: #4ABA70;
    --vueni-error: #D64545;
    --vueni-warning: #E3AF64;
    --vueni-info: #516AC8;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* CLS Prevention: Font loading optimization */
  @font-face {
    font-family: 'SF Pro Display';
    font-display: swap;
    font-weight: 400 700;
  }

  body {
    @apply bg-background text-foreground;
    font-family:
      'SF Pro Display',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      system-ui,
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Prevent layout shift during font loading */
    font-synthesis: none;
    font-kerning: auto;
  }

  /* Apply SF Pro Display to headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family:
      'SF Pro Display',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      system-ui,
      sans-serif;
    font-weight: 600;
    letter-spacing: -0.025em;
  }

  /* Button and interactive elements */
  button,
  input,
  select,
  textarea {
    font-family:
      'SF Pro Display',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      system-ui,
      sans-serif;
  }

  /* Navigation specific font styling */
  .nav-text,
  .navigation-text {
    font-family:
      'SF Pro Display',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      system-ui,
      sans-serif;
    font-weight: 500;
    letter-spacing: -0.01em;
  }
}

/* CLS Prevention: Chart loading skeletons */
@layer components {
  .chart-skeleton {
    @apply bg-white/[0.02] rounded-lg border border-white/[0.08] animate-pulse;
    min-height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .chart-skeleton-bar {
    @apply bg-white/[0.05] rounded-sm;
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Prevent layout shift during image loading */
  img {
    @apply block;
    height: auto;
    max-width: 100%;
  }

  /* Async component loading container to prevent CLS */
  .async-container {
    min-height: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* Dark mode dropdown enhancements for consistency */
[data-theme='dark'] [data-radix-dropdown-menu-content],
html.dark [data-radix-dropdown-menu-content] {
  background: rgba(0, 0, 0, 0.95) !important;
  border: 2px solid rgba(255, 255, 255, 0.2) !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5) !important;
  backdrop-filter: blur(16px) !important;
}

[data-theme='dark'] [data-radix-dropdown-menu-item],
html.dark [data-radix-dropdown-menu-item] {
  color: rgba(255, 255, 255, 0.9) !important;
}

[data-theme='dark'] [data-radix-dropdown-menu-item]:hover,
html.dark [data-radix-dropdown-menu-item]:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: rgb(255, 255, 255) !important;
}

[data-theme='dark'] [data-radix-dropdown-menu-item]:focus,
html.dark [data-radix-dropdown-menu-item]:focus {
  background: rgba(255, 255, 255, 0.15) !important;
  color: rgb(255, 255, 255) !important;
  outline: 2px solid rgb(96, 165, 250) !important; /* blue-400 focus ring */
  outline-offset: 1px !important;
}

/* Enhanced Insights Page Responsive Styles */
@layer components {
  .insights-container {
    @apply min-h-screen w-full relative;
    /* Mobile padding */
    @apply px-4 py-6;
  }

  .main-cards-grid {
    @apply grid gap-4 w-full;
    /* Mobile: 1 column */
    @apply grid-cols-1;
    /* Tablet: 2 columns */
    @apply md:grid-cols-2;
    /* Desktop: 3 columns */
    @apply lg:grid-cols-3;
  }

  .score-card-container {
    @apply w-full min-h-[200px];
    /* Consistent height across devices */
    @apply h-auto md:h-[250px] lg:h-[280px];
  }

  /* Comprehensive wellness/eco card responsiveness */
  .comprehensive-card {
    @apply w-full max-w-none;
    /* Mobile: full width */
    @apply col-span-1;
    /* Tablet: full width */
    @apply md:col-span-2;
    /* Desktop: span both columns to center content */
    @apply lg:col-span-2;
  }

  /* Category grid responsiveness */
  .category-grid {
    @apply grid gap-2;
    /* Mobile: 3 columns */
    @apply grid-cols-3;
    /* Tablet: 4 columns */
    @apply sm:grid-cols-4;
    /* Desktop: 6 columns */
    @apply md:grid-cols-6;
  }

  .category-item {
    @apply p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors;
    /* Mobile: smaller padding */
    @apply sm:p-3;
  }

  /* Spending grid responsiveness */
  .spending-grid {
    @apply grid gap-3;
    /* Mobile: 2 columns */
    @apply grid-cols-2;
    /* Tablet: 3 columns */
    @apply sm:grid-cols-3;
  }

  .spending-item {
    @apply text-center space-y-1;
    /* Mobile: smaller text */
    @apply text-sm sm:text-base;
  }

  /* Environmental impact grid */
  .impact-grid {
    @apply grid gap-3;
    /* Mobile: 2 columns */
    @apply grid-cols-2;
    /* Tablet: 4 columns */
    @apply sm:grid-cols-4;
  }

  .impact-item {
    @apply text-center space-y-1;
    /* Mobile: smaller text */
    @apply text-sm sm:text-base;
  }

  /* Trends responsiveness */
  .trends-grid {
    @apply flex flex-wrap gap-2;
    /* Mobile: space between items */
    @apply justify-between sm:justify-start sm:space-x-4;
  }

  .trend-item {
    @apply flex items-center space-x-1;
    /* Mobile: smaller text */
    @apply text-xs sm:text-sm;
  }

  /* Tab navigation responsiveness */
  .tab-navigation {
    @apply flex p-1 mb-6;
    /* Mobile: smaller padding */
    @apply rounded-2xl sm:rounded-3xl;
  }

  .tab-button {
    @apply flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all duration-300;
    /* Tablet: larger padding */
    @apply sm:py-3 sm:px-6 sm:rounded-2xl sm:text-sm;
  }

  /* Score circle responsiveness */
  .score-circle {
    @apply w-20 h-20;
    /* Tablet: larger */
    @apply sm:w-24 sm:h-24;
    /* Desktop: even larger */
    @apply md:w-28 md:h-28;
  }

  .score-text {
    @apply text-xl font-bold;
    /* Tablet: larger */
    @apply sm:text-2xl;
    /* Desktop: even larger */
    @apply md:text-3xl;
  }

  .score-label {
    @apply text-xs;
    /* Tablet: slightly larger */
    @apply sm:text-sm;
  }

  /* Header responsiveness */
  .insights-header {
    @apply text-center mb-6;
    /* Mobile: smaller margins */
    @apply sm:mb-8;
  }

  .insights-title {
    @apply text-2xl font-bold text-white mb-2;
    /* Tablet: larger */
    @apply sm:text-3xl;
    /* Desktop: even larger */
    @apply md:text-4xl;
  }

  .insights-subtitle {
    @apply text-white/70 text-base;
    /* Tablet: larger */
    @apply sm:text-lg;
  }

  /* Container max-width responsive */
  .insights-content {
    @apply relative z-10 w-full mx-auto;
    /* Mobile: full width with padding */
    @apply max-w-none;
    /* Tablet: contained */
    @apply sm:max-w-6xl;
    /* Desktop: larger container */
    @apply xl:max-w-7xl;
  }

  /* Key metrics grid responsiveness */
  .metrics-grid {
    @apply grid gap-3 w-full;
    /* Mobile: 1 column */
    @apply grid-cols-1;
    /* Small mobile: 2 columns */
    @apply sm:grid-cols-2;
    /* Tablet: 4 columns */
    @apply md:grid-cols-4;
  }

  /* Metric card responsiveness */
  .metric-card {
    @apply min-h-[120px];
    /* Tablet: taller */
    @apply sm:min-h-[140px];
    /* Desktop: even taller */
    @apply md:min-h-[160px];
  }

  /* Text responsiveness utilities */
  .responsive-text-xs {
    @apply text-xs sm:text-sm md:text-base;
  }

  .responsive-text-sm {
    @apply text-sm sm:text-base md:text-lg;
  }

  .responsive-text-base {
    @apply text-base sm:text-lg md:text-xl;
  }

  .responsive-text-lg {
    @apply text-lg sm:text-xl md:text-2xl;
  }

  /* Spacing utilities */
  .responsive-spacing-sm {
    @apply space-y-3 sm:space-y-4 md:space-y-6;
  }

  .responsive-spacing-md {
    @apply space-y-4 sm:space-y-6 md:space-y-8;
  }

  .responsive-spacing-lg {
    @apply space-y-6 sm:space-y-8 md:space-y-12;
  }

  /* Padding utilities */
  .responsive-padding-sm {
    @apply p-3 sm:p-4 md:p-6;
  }

  .responsive-padding-md {
    @apply p-4 sm:p-6 md:p-8;
  }

  /* Safe area for mobile devices */
  @supports (padding: max(0px)) {
    .insights-container {
      padding-left: max(1rem, env(safe-area-inset-left));
      padding-right: max(1rem, env(safe-area-inset-right));
      padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
    }
  }

  /* Touch-friendly targets for mobile */
  @media (max-width: 768px) {
    .tab-button {
      min-height: 44px; /* iOS recommended touch target */
    }

    .category-item {
      min-height: 44px;
      min-width: 44px;
    }
  }

  /* High DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .score-circle svg {
      @apply antialiased;
    }
  }

  /* Landscape orientation on mobile */
  @media (max-height: 500px) and (orientation: landscape) {
    .insights-container {
      @apply py-2;
    }

    .insights-header {
      @apply mb-4;
    }

    .insights-title {
      @apply text-xl;
    }
  }

  /* Large desktop screens */
  @media (min-width: 1536px) {
    .insights-content {
      @apply max-w-7xl;
    }

    .main-cards-grid {
      @apply gap-6;
    }

    .score-card-container {
      @apply h-[320px];
    }
  }
}

/* Dark Liquid Glass Menu Bar fallback when backdrop-filter is unsupported */
@supports not (
  (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))
) {
  nav[role='menubar'] {
    background: rgba(17, 17, 17, 0.85) !important; /* Solid dark accent */
  }
}

/* Remove duplicate import - already imported at top of file */
