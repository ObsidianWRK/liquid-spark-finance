@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. */

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;

    --sidebar-background: 0 0% 98%;

    --sidebar-foreground: 240 5.3% 26.1%;

    --sidebar-primary: 240 5.9% 10%;

    --sidebar-primary-foreground: 0 0% 98%;

    --sidebar-accent: 240 4.8% 95.9%;

    --sidebar-accent-foreground: 240 5.9% 10%;

    --sidebar-border: 220 13% 91%;

    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'SF Pro Rounded', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Apply SF Pro Rounded to headings */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'SF Pro Rounded', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    font-weight: 600;
    letter-spacing: -0.025em;
  }
  
  /* Button and interactive elements */
  button, input, select, textarea {
    font-family: 'SF Pro Rounded', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  }
  
  /* Navigation specific font styling */
  .nav-text, .navigation-text {
    font-family: 'SF Pro Rounded', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 500;
    letter-spacing: -0.01em;
  }
}

/* ======================================================
   WCAG AA Compliant Light Mode Overrides
   ====================================================== */

/* Main text color overrides with proper contrast ratios */
html:not(.dark) [class*="text-white"] {
  color: rgb(15 23 42) !important; /* slate-900: contrast ratio 15.84:1 */
}

html:not(.dark) [class*="text-white/90"] {
  color: rgb(30 41 59) !important; /* slate-800: contrast ratio 12.59:1 */
}

html:not(.dark) [class*="text-white/80"] {
  color: rgb(51 65 85) !important; /* slate-700: contrast ratio 9.32:1 */
}

html:not(.dark) [class*="text-white/70"] {
  color: rgb(71 85 105) !important; /* slate-600: contrast ratio 7.15:1 */
}

html:not(.dark) [class*="text-white/60"] {
  color: rgb(100 116 139) !important; /* slate-500: contrast ratio 5.41:1 */
}

/* Glass card backgrounds with proper opacity for readability */
html:not(.dark) .liquid-glass-card {
  background: rgba(248, 250, 252, 0.95) !important; /* slate-50 with high opacity */
  border: 1px solid rgba(148, 163, 184, 0.4) !important; /* slate-400 for visible borders */
  backdrop-filter: blur(12px) !important;
}

html:not(.dark) .liquid-glass-card:hover {
  background: rgba(241, 245, 249, 0.98) !important; /* slate-100 with higher opacity */
  border-color: rgba(100, 116, 139, 0.6) !important; /* slate-500 for enhanced border */
}

/* Navigation glass effects */
html:not(.dark) .liquid-glass-nav {
  background: rgba(248, 250, 252, 0.92) !important; /* slate-50 */
  border: 1px solid rgba(148, 163, 184, 0.3) !important; /* slate-400 */
}

html:not(.dark) .liquid-glass-top-menubar {
  background: rgba(248, 250, 252, 0.95) !important; /* slate-50 with high opacity */
  border: 1px solid rgba(148, 163, 184, 0.4) !important; /* visible border */
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08) !important; /* subtle shadow for definition */
}

/* Menu items and interactive elements */
html:not(.dark) .liquid-glass-menu-item {
  background: rgba(241, 245, 249, 0.7) !important; /* slate-100 */
  border: 1px solid rgba(203, 213, 225, 0.6) !important; /* slate-300 */
}

html:not(.dark) .liquid-glass-menu-item:hover {
  background: rgba(226, 232, 240, 0.9) !important; /* slate-200 */
  border-color: rgba(148, 163, 184, 0.8) !important; /* slate-400 */
}

html:not(.dark) .liquid-glass-menu-item.active {
  background: rgba(219, 234, 254, 0.9) !important; /* blue-100 */
  border-color: rgba(59, 130, 246, 0.6) !important; /* blue-500 */
  color: rgb(30, 64, 175) !important; /* blue-800 for high contrast */
}

/* Button enhancements */
html:not(.dark) .liquid-glass-button {
  background: rgba(241, 245, 249, 0.8) !important; /* slate-100 */
  border: 1px solid rgba(148, 163, 184, 0.5) !important; /* slate-400 */
}

html:not(.dark) .liquid-glass-button:hover {
  background: rgba(226, 232, 240, 0.9) !important; /* slate-200 */
  border-color: rgba(100, 116, 139, 0.7) !important; /* slate-500 */
}

/* iOS navigation bubble */
html:not(.dark) .ios26-nav-bubble {
  background: rgba(248, 250, 252, 0.95) !important; /* slate-50 */
  border: 1px solid rgba(148, 163, 184, 0.4) !important; /* slate-400 */
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important; /* shadow for definition */
}

html:not(.dark) .ios26-nav-item {
  color: rgb(71, 85, 105) !important; /* slate-600: good contrast */
}

html:not(.dark) .ios26-nav-item-active {
  background: rgba(219, 234, 254, 0.8) !important; /* blue-100 */
  color: rgb(30, 64, 175) !important; /* blue-800: high contrast */
  border-color: rgba(59, 130, 246, 0.3) !important; /* blue-500 border */
}

html:not(.dark) .ios26-nav-item:hover {
  background: rgba(241, 245, 249, 0.7) !important; /* slate-100 */
  color: rgb(51, 65, 85) !important; /* slate-700 */
}

/* Floating Action Button */
html:not(.dark) .liquid-glass-fab {
  background: rgba(59, 130, 246, 0.9) !important; /* blue-500 with high opacity */
  border: 2px solid rgba(37, 99, 235, 0.6) !important; /* blue-600 border */
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3) !important; /* blue shadow */
}

html:not(.dark) .liquid-glass-fab:hover {
  background: rgba(37, 99, 235, 0.95) !important; /* blue-600 */
  border-color: rgba(29, 78, 216, 0.8) !important; /* blue-700 */
}

/* Ensure FAB text remains white for proper contrast */
html:not(.dark) .liquid-glass-fab [class*="text-white"] {
  color: rgb(255, 255, 255) !important; /* Keep white for contrast against blue */
}

/* Notification badge improvements */
html:not(.dark) .bg-red-500 {
  background-color: rgb(239, 68, 68) !important; /* red-500 */
  border: 2px solid rgb(248, 250, 252) !important; /* white border for definition */
}

/* Focus states for accessibility */
html:not(.dark) *:focus-visible {
  outline: 2px solid rgb(59, 130, 246) !important; /* blue-500 */
  outline-offset: 2px !important;
}

html:not(.dark) button:focus-visible {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3) !important; /* blue focus ring */
}

/* Gradients and special text treatments */
html:not(.dark) .bg-gradient-to-r.from-blue-400.to-purple-400 {
  background: linear-gradient(to right, rgb(30, 64, 175), rgb(109, 40, 217)) !important; /* blue-800 to purple-700 */
}

html:not(.dark) .bg-clip-text.text-transparent {
  color: rgb(30, 64, 175) !important; /* blue-800 as fallback */
  background-clip: text;
  -webkit-background-clip: text;
}

/* Dividers and separators */
html:not(.dark) [class*="bg-white/10"],
html:not(.dark) [class*="border-white/10"] {
  background-color: rgba(148, 163, 184, 0.3) !important; /* slate-400 */
  border-color: rgba(148, 163, 184, 0.3) !important;
}

/* Enhanced contrast for high contrast preference */
@media (prefers-contrast: high) {
  html:not(.dark) .liquid-glass-card {
    background: rgba(255, 255, 255, 0.98) !important;
    border-color: rgba(71, 85, 105, 0.8) !important; /* slate-600 */
  }
  
  html:not(.dark) [class*="text-white"] {
    color: rgb(0, 0, 0) !important; /* Pure black for maximum contrast */
  }
  
  html:not(.dark) .liquid-glass-menu-item.active {
    background: rgba(191, 219, 254, 1) !important; /* blue-200 solid */
    color: rgb(30, 58, 138) !important; /* blue-900 */
  }
}

/* Print styles override */
@media print {
  html:not(.dark) .liquid-glass-card,
  html:not(.dark) .liquid-glass-nav,
  html:not(.dark) .liquid-glass-button {
    background: white !important;
    border: 1px solid rgb(0, 0, 0) !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
  }
  
  html:not(.dark) [class*="text-white"] {
    color: rgb(0, 0, 0) !important;
  }
}

/* Enhanced Insights Page Responsive Styles */
@layer components {
  .insights-container {
    @apply min-h-screen w-full relative;
    /* Mobile padding */
    @apply px-4 py-6;
  }

  .main-cards-grid {
    @apply grid gap-4 w-full;
    /* Mobile: 1 column */
    @apply grid-cols-1;
    /* Tablet: 2 columns */
    @apply md:grid-cols-2;
    /* Desktop: 3 columns */
    @apply lg:grid-cols-3;
  }

  .score-card-container {
    @apply w-full min-h-[200px];
    /* Consistent height across devices */
    @apply h-auto md:h-[250px] lg:h-[280px];
  }

  /* Comprehensive wellness/eco card responsiveness */
  .comprehensive-card {
    @apply w-full max-w-none;
    /* Mobile: full width */
    @apply col-span-1;
    /* Tablet: full width */
    @apply md:col-span-2;
    /* Desktop: span both columns to center content */
    @apply lg:col-span-2;
  }

  /* Category grid responsiveness */
  .category-grid {
    @apply grid gap-2;
    /* Mobile: 3 columns */
    @apply grid-cols-3;
    /* Tablet: 4 columns */
    @apply sm:grid-cols-4;
    /* Desktop: 6 columns */
    @apply md:grid-cols-6;
  }

  .category-item {
    @apply p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors;
    /* Mobile: smaller padding */
    @apply sm:p-3;
  }

  /* Spending grid responsiveness */
  .spending-grid {
    @apply grid gap-3;
    /* Mobile: 2 columns */
    @apply grid-cols-2;
    /* Tablet: 3 columns */
    @apply sm:grid-cols-3;
  }

  .spending-item {
    @apply text-center space-y-1;
    /* Mobile: smaller text */
    @apply text-sm sm:text-base;
  }

  /* Environmental impact grid */
  .impact-grid {
    @apply grid gap-3;
    /* Mobile: 2 columns */
    @apply grid-cols-2;
    /* Tablet: 4 columns */
    @apply sm:grid-cols-4;
  }

  .impact-item {
    @apply text-center space-y-1;
    /* Mobile: smaller text */
    @apply text-sm sm:text-base;
  }

  /* Trends responsiveness */
  .trends-grid {
    @apply flex flex-wrap gap-2;
    /* Mobile: space between items */
    @apply justify-between sm:justify-start sm:space-x-4;
  }

  .trend-item {
    @apply flex items-center space-x-1;
    /* Mobile: smaller text */
    @apply text-xs sm:text-sm;
  }

  /* Tab navigation responsiveness */
  .tab-navigation {
    @apply flex p-1 mb-6;
    /* Mobile: smaller padding */
    @apply rounded-2xl sm:rounded-3xl;
  }

  .tab-button {
    @apply flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all duration-300;
    /* Tablet: larger padding */
    @apply sm:py-3 sm:px-6 sm:rounded-2xl sm:text-sm;
  }

  /* Score circle responsiveness */
  .score-circle {
    @apply w-20 h-20;
    /* Tablet: larger */
    @apply sm:w-24 sm:h-24;
    /* Desktop: even larger */
    @apply md:w-28 md:h-28;
  }

  .score-text {
    @apply text-xl font-bold;
    /* Tablet: larger */
    @apply sm:text-2xl;
    /* Desktop: even larger */
    @apply md:text-3xl;
  }

  .score-label {
    @apply text-xs;
    /* Tablet: slightly larger */
    @apply sm:text-sm;
  }

  /* Header responsiveness */
  .insights-header {
    @apply text-center mb-6;
    /* Mobile: smaller margins */
    @apply sm:mb-8;
  }

  .insights-title {
    @apply text-2xl font-bold text-white mb-2;
    /* Tablet: larger */
    @apply sm:text-3xl;
    /* Desktop: even larger */
    @apply md:text-4xl;
  }

  .insights-subtitle {
    @apply text-white/70 text-base;
    /* Tablet: larger */
    @apply sm:text-lg;
  }

  /* Container max-width responsive */
  .insights-content {
    @apply relative z-10 w-full mx-auto;
    /* Mobile: full width with padding */
    @apply max-w-none;
    /* Tablet: contained */
    @apply sm:max-w-6xl;
    /* Desktop: larger container */
    @apply xl:max-w-7xl;
  }

  /* Key metrics grid responsiveness */
  .metrics-grid {
    @apply grid gap-3 w-full;
    /* Mobile: 1 column */
    @apply grid-cols-1;
    /* Small mobile: 2 columns */
    @apply sm:grid-cols-2;
    /* Tablet: 4 columns */
    @apply md:grid-cols-4;
  }

  /* Metric card responsiveness */
  .metric-card {
    @apply min-h-[120px];
    /* Tablet: taller */
    @apply sm:min-h-[140px];
    /* Desktop: even taller */
    @apply md:min-h-[160px];
  }

  /* Text responsiveness utilities */
  .responsive-text-xs {
    @apply text-xs sm:text-sm md:text-base;
  }

  .responsive-text-sm {
    @apply text-sm sm:text-base md:text-lg;
  }

  .responsive-text-base {
    @apply text-base sm:text-lg md:text-xl;
  }

  .responsive-text-lg {
    @apply text-lg sm:text-xl md:text-2xl;
  }

  /* Spacing utilities */
  .responsive-spacing-sm {
    @apply space-y-3 sm:space-y-4 md:space-y-6;
  }

  .responsive-spacing-md {
    @apply space-y-4 sm:space-y-6 md:space-y-8;
  }

  .responsive-spacing-lg {
    @apply space-y-6 sm:space-y-8 md:space-y-12;
  }

  /* Padding utilities */
  .responsive-padding-sm {
    @apply p-3 sm:p-4 md:p-6;
  }

  .responsive-padding-md {
    @apply p-4 sm:p-6 md:p-8;
  }

  /* Safe area for mobile devices */
  @supports (padding: max(0px)) {
    .insights-container {
      padding-left: max(1rem, env(safe-area-inset-left));
      padding-right: max(1rem, env(safe-area-inset-right));
      padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
    }
  }

  /* Touch-friendly targets for mobile */
  @media (max-width: 768px) {
    .tab-button {
      min-height: 44px; /* iOS recommended touch target */
    }
    
    .category-item {
      min-height: 44px;
      min-width: 44px;
    }
  }

  /* High DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .score-circle svg {
      @apply antialiased;
    }
  }

  /* Landscape orientation on mobile */
  @media (max-height: 500px) and (orientation: landscape) {
    .insights-container {
      @apply py-2;
    }
    
    .insights-header {
      @apply mb-4;
    }
    
    .insights-title {
      @apply text-xl;
    }
  }

  /* Large desktop screens */
  @media (min-width: 1536px) {
    .insights-content {
      @apply max-w-7xl;
    }
    
    .main-cards-grid {
      @apply gap-6;
    }
    
    .score-card-container {
      @apply h-[320px];
    }
  }
}

/* Theme color variables */
:root {
  --color-bg: #000000;
  --color-surface: rgba(255,255,255,0.04);
  --color-primary: #3b82f6; /* blue-500 */
  --color-primary-foreground: #ffffff;
}

html.light {
  --color-bg: #fafafa;
  --color-surface: rgba(0,0,0,0.04);
  --color-primary: #2563eb; /* blue-600 */
  --color-primary-foreground: #ffffff;
}

/* Utility classes using variables */
.bg-surface {
  background-color: var(--color-surface);
}
.text-primary {
  color: var(--color-primary);
}
.bg-primary {
  background-color: var(--color-primary);
  color: var(--color-primary-foreground);
}